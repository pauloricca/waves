test-reference:
  mix:
    signals:
      - map:
          from: [200, 400]
          to: [0, 0]
          signal:
            osc:
              id: test_lfo
              type: sin
              freq: 2
              range: [200, 400]
              duration: 2
      - osc:
          type: sin
          freq:
            reference:
              ref: test_lfo
          duration: 2

test-map:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 1
    to: [-1, 1]

test-map-bracket-syntax:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 1
    to: [-0.5, 0.5]

test-map-list-syntax:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 1
    to:
      - -0.3
      - 0.3

test-map-with-from:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 1
    from: [-1, 1]
    to: [0, 1]

test-map-with-clip:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 1
    to: [-2, 2]
    clip: [-0.5, 0.5]

test-map-dynamic-range:
  map:
    signal:
      osc:
        type: sin
        freq: 440
        duration: 2
    to:
      - osc:
          type: sin
          freq: 0.5
          range: [-1, -0.5]
      - osc:
          type: sin
          freq: 0.5
          range: [0.5, 1]

test-osc-range:
  osc:
    type: sin
    freq: 440
    duration: 1
    range: [-0.5, 0.5]

retrig:
  retrigger:
    time: 0.1
    feedback: 0.5
    repeats: 4
    signal:
      osc:
        type: tri
        duration: 0.2
        amp: 1
        freq: 400
        attack: 0.005
        release: 0.2


seq2:
  sequencer:
    interval: 0.3
    repeat: 40
    sequence:
      - retrig
      -
      -
      -
      -
      -
      -


continuous:
  osc:
    type: tri
    duration: 4
    amp: 5
    attack: 0.2
    release: 1
    freq: 200


continuous-partial:
      osc:
        type: none
        duration: 4
        amp: 5
        freq: 200
        partials:
          - osc:
              type: tri
              freq: [1, 3, 1]
      # osc:
      #   duration: 4
      #   freq: 200
      #   type: none
          # osc:
          #   type: perlin
          #   freq: 3
          #   scale: 2
          #   min: 50
          #   max: 90
        # partials:
        #   - osc:
        #       type: tri
        #       amp: 5
        #       freq: [1, 3, 1]
          # - osc:
          #     type: sin
          #     amp: 0.1
          #     freq: 
          #       osc:
          #         type: sin
          #         min: 1
          #         max: 3
          #         freq: 0.2


continuous-2:
  map:
    to:
      - osc:
          type: sin
          freq: 
            osc:
              type: perlin
              freq: 3
              scale: 2
              range: [0.1, 10]
          scale: 13
          range: [0, -0.6]
          seed: 1
      - osc:
          type: perlin
          freq: 3
          scale: 1
          range: [0, 0.9]
          seed: 1
    signal:
      osc:
        duration: 4
        freq: 200
        partials:
          - osc:
              type: sin
              amp: 
                osc:
                  type: tri
                  amp: 0.8
                  freq: [1, 15, 1]
              freq: 
                osc:
                  type: sin
                  range: [1, 3]
                  freq: [1, -3, 1]

seq:
  sequencer:
    interval: 0.1
    sequence:
    - phoom
    - tick
    - tick
    - 
    - tick
    -
    -
    - phoom
    - [tick, phoom]
    -
    - tick
    -
    - tick
    -
    -
    -

norm:
  envelope:
    duration: 1
    attack: 0.2
    release: 0.1
    signal:
      map:
        to:
          - osc:
              freq: [30, 1]
              range: [0, -2]
          - osc:
              freq: [30, 1]
              range: [0, 4]
        clip: [-1, 1]
        signal:
          osc:
            freq: 60
            # release: 0.9
            partials:
              - osc:
                  freq: 1.1666
                  amp: 0.2
              - osc:
                  freq: 1.5
                  amp: 0.2
              - osc:
                  freq: 2
                  amp: 0.1
                  duration: 0.3
                  release: 0.8
                  type: sqr
              - osc:
                  freq: 8
                  amp: 0.2
                  duration: 0.05
                  release: 0.8
                  type: sqr


feedback:
  sample:
    duration: 6
    start: 0.354
    # end: 0.5
    speed: [0.1, 0.05]
    # speed: 1
    loop: true
    # overlap: 0.5
    file: samples/feedback.wav

shaker:
  sample:
    duration: 15
    # start: 0.354
    start: 0.06
    # speed: [-0.2, 0.2, 0.1]
    speed: 1
    loop: true
    # overlap: 0.5
    file: samples/shaker.wav

part-a-shuffled:
  sequencer:
    sequence:
      - [lead f80, thump a0.2]
      - shuffle:
          seed: 7
          chunks: 32
          signal:
            sequencer:
              sequence:
                - part-a

paulo2:
  shuffle:
    seed: 7
    chunks: 12
    signal:
      sample:
        file: samples/paulo.wav


paulo:
  map:
    from: [-0.5, 0.5]
    to: [-0.8, 0.8]
    signal:
      envelope:
        attack: 0.04
        release: 0.04
        signal:
          retrigger:
            time: 0.8
            repeats: 5
            signal:
              # shuffle:
              #   chunks: 16
              #   signal:
                  # filter:
                  #   cutoff: [200, [2000, 0.2], [2000, 0.8], 200]
                  #   peak: 0.1
                  #   signal:
                      map:
                        to: [-1, 1]
                        signal:
                          sample:
                            duration: 8
                            start: 0.354
                            speed: [-0.2, 0.2, 0.1]
                            # speed:
                            #   osc:
                            #     type: perlin
                            #     min: 0.1
                            #     max: 3
                            #     scale: 5
                            end: 0.5
                            loop: true
                            overlap: 0.5
                            file: samples/paulo.wav

fx:
  # filter:
  #   duration: 4
  #   # cutoff: [0, [400, 0.2], [4000, 0.4], 0]
  #   cutoff: [0, 3000, 0]
  #   signal:
      map:
        to: [-1, 1]
        duration: 14
        signal:
          sample:
            start: 0.6
            speed: 0.01
            end: 0.63
            loop: true
            overlap: 0.2
            file: samples/fx.wav

gregor:
  filter:
    duration: 4
    cutoff: [0, [600, 0.3], [0, 1]]
    signal:
      map:
        to: [-1, 1]
        signal:
          sample:
            duration: 4
            start: 0.6
            end: 0.63
            loop: true
            overlap: 0.2
            file: samples/gregor.wav

sample-seq-rumble:
  map:
    to: [-1, 1]
    signal:
      invert:
        signal:
          retrigger:
            feedback: 0.5
            time: 0.2
            signal:
              shuffle:
                signal:
                  sequencer:
                    interval: 0.1
                    sequence:
                      - fx
                      - tick
                      -
                      - tick f18000
                      - tick
                      - tick
                      - 
                      - tick f10000
                      - 
                      - tick
                      - tick
                      - thump
                      - tick
                      -
                      -
                      - 
                      - thump
                      - tick
                      -
                      - tick
                      -
                      -
                      - tick
                      -
                      -

test3:
  map:
    to: [-1, 1]
    signal:
      smooth:
        step: 0.01
        signal:
          retrigger:
            time: 0.5
            repeats: 3
            feedback: 0.5
            signal:
              retrigger:
                time: 1.5
                repeats: 5
                feedback: 0.3
                signal:
                  filter:
                    duration: 3
                    cutoff: 200
                    signal:
                      smooth:
                        step: 0.02
                        signal:
                          shuffle:
                            invert: 0.5
                            size: 0.3
                            signal:
                              osc:
                                attack: 0.01
                                release: 0.1
                                freq:
                                  osc:
                                    type: perlin
                                    scale: 6
                                    seed: 1
                                    range: [20, 200]
                                amp:
                                  osc:
                                    type: sqr
                                    freq: 5
                                    range: [0.7, 1]
                                    partials:
                                      - osc:
                                          amp: 0.5
                                partials:
                                  - osc:
                                      type: tri
                                      freq: 2
                                      amp: 0.5
                                  - osc:
                                      type: sqr
                                      freq: 0.5
                                      amp: 0.2

test2:
  osc:
    freq: [10, 600]
    duration: 4
    attack: 0.3
    release: 0.3
    partials:
      - osc:
          type: saw
          amp: 0.5
      - osc:
          type: tri
          amp: 0.8
          freq:
            osc: 
              type: perlin
              scale: 2
              seed: 2
              range: [0.99, 1.21]
      - osc:
          type: sqr
          amp: 0.8
          freq:
            osc:
              type: perlin
              scale: 7
              seed: 3
              range: [0.95, 1.01]
      - osc:
          type: saw
          amp: 0.5
          freq:
            osc: 
              type: perlin
              scale: 2
              seed: 4
              range: [0.99, 1.01]
      - osc: 
          type: saw
          amp: 0.5
          freq:
            osc:
              type: perlin
              scale: 2
              seed: 5
              range: [0.9, 1.1]
    amp:
      osc:
        type: perlin
        scale: 3
        range: [0.3, 0.8]

test:
  osc:
    freq: [300, [100, 0.1]]
    amp: 1
    type: saw
    duration: 1
    partials:
      - osc:
          freq: 2
          amp: 0.5
          type: saw
      - osc:
          freq: 6
          amp: 0.3
          type: sqr
      - osc:
          type: noise
          amp: 2
          duration: 0.05
          release: 1
    attack: 0.02
    release: 0.8

phoom:
  osc:
    freq: 190
    amp: 0.4
    duration: 1.4
    attack: 0.2
    release: 0.8
    partials:
      - osc:
          amp: 0.4
          duration: 0.01
          partials:
            - osc:
                freq: 2
                amp: 0.5
            - osc:
                freq: 2.2
                amp: 0.5
            - osc:
                freq: 2.3
                amp: 0.5
            - osc:
                freq: 5
                amp: 0.5
      - osc:
          freq: 1.5
          amp: 0.5
      - osc:
          freq: 2
          amp: 0.5

thump:
  osc:
    freq: [10000, [500, 0.01], [60, 0.02]]
    duration: 0.6
    attack: 0.01
    release: 1
    partials:
      - osc:
          amp: 0.1
          duration: 0.05
          attack: 0.1
          release: 1
          partials:
            - osc:
                freq: 5
                amp: 1
            - osc:
                freq: 7.2
                amp: 0.8
            - osc:
                freq: 8.2
                amp: 0.6
            - osc:
                freq: 10
                amp: 0.4
            - osc:
                freq: 12
                amp: 0.2

charge:
  osc:
    freq: [10000, [500, 0.01], [60, 0.02]]
    amp: [0, [1, 0.08], [0.4, 0.2], [0.8, 0.3], [0.6, 0.4], 0]
    duration: 8
    release: 0.5
    partials:
      - osc:
          freq: 2
          amp: [0.5, 0]
      - osc:
          type: noise
          amp: [0, 0.002, 0.01]
      - osc:
          freq: [[5, 0], [50, 0.3]]
          amp: [0.02, 0.001, 0]
          type: saw

ding:
  osc:
    freq: 800
    amp:
      osc:
        freq: 5000
        range: [0, 1]
    duration: 1
    release: 1
    partials:
      - osc: 
          type: noise
          amp: [0.04, 0]

synth:
  osc:
    freq: 240
    type: none
    amp: 
      osc:
        freq: 200
        range: [-0.7, 0.7]
    attack: 0.02
    release: 0.8
    duration: 3
    partials:
      - osc:
          freq: [5, [1, 0.01]]
          partials:
            - osc:
                freq: 1
                type: saw
                amp: [0.3, [0, 0.8]]
            - osc:
                freq: 1.0015
                type: saw
                amp: [0.3, [0, 0.8]]
            - osc:
                freq: 0.9985
                type: saw
                amp: [0.3, [0, 0.8]]

lead:
  osc:
    freq: 80
    duration: 2
    attack: 0.01
    release: 1
    partials:
      - osc:
          duration: 0.0015
          attack: 0.001
          release: 0.3
          partials:
            - osc:
                freq: 5
                amp: 0.5
            - osc:
                freq: 7.2
                amp: 0.5
            - osc:
                freq: 8.3
                amp: 0.5
            - osc:
                freq: 10
                amp: 0.5
            - osc:
                freq: 12
                amp: 0.5
      - osc:
          attack: 0.001
          release: 0.3
          freq: 2
          amp: 0.3
      - osc:
          attack: 0.001
          release: 0.3
          freq: 4
          amp: 0.05


tick:
  osc:
    freq: 4400
    duration: 0.0002
    amp: 0.2
    partials:
      - osc:
          freq: 2
          amp: 0.5
      - osc:
          freq: 0.5
          amp: 0.2

beep:
  osc:
    freq: 8800
    amp: 0.4
    duration: 0.07
    attack: 1
    partials:
      - osc:
          freq: 2
          amp: 0.5
      - osc:
          freq: 0.5
          amp: 0.2

part-a-inverted:
  invert:
    signal:
      sequencer:
        interval: 0.1
        sequence:
          -
          - tick
          -
          -
          - tick
          - beep f13000
          - lead f120
          - tick f18000
          - 
          - phoom f15000
          - tick f10000
          -
          - tick
          -
          -
          - tick
          - tick
          -
          -
          -
          - tick
          -
          -
          -

part-a-shuffled:
  sequencer:
    sequence:
      - [lead f80, thump a0.2]
      - shuffle:
          seed: 7
          chunks: 32
          signal:
            sequencer:
              sequence:
                - part-a

part-b-shuffled:
  sequencer:
    sequence:
      - [lead f69, thump a0.2]
      - shuffle:
          seed: 7
          chunks: 32
          signal:
            sequencer:
              sequence:
                - part-b

part-c-shuffled:
  sequencer:
    sequence:
      - [lead f60, thump a0.2]
      - shuffle:
          seed: 7
          chunks: 32
          signal:
            sequencer:
              sequence:
                - part-c

part-d-shuffled:
  sequencer:
    sequence:
      - [lead f70, thump a0.2]
      - shuffle:
          seed: 10
          chunks: 35
          signal:
            sequencer:
              sequence:
                - part-d

main-sequence-shuffled:
  sequencer:
    chain:
      - part-a-inverted
      - part-a-shuffled
      - part-b-shuffled
      - part-c-shuffled
      - part-d-shuffled
      # - part-e-shuffled
      # - part-f-shuffled
      # - part-g-shuffled
      # - part-h-shuffled


part-a:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f80, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - 
      - beep f13000
      - lead f120
      - tick f18000
      - 
      - phoom f15000
      - tick f10000
      -
      - tick
      -
      -
      - tick
      - tick
      -
      -
      -
      - tick
      -
      -
      -

part-b:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f69, tick]
      -
      - tick
      -
      - [lead f190 a0.3, tick]
      -
      - tick
      -
      - [lead f107, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      -
      -
      - tick
      -
      -
      - tick
      - tick
      -
      -
      -
      -
      -
      -


part-c:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f60, tick]
      -
      - tick
      -
      - [phoom f192 a0.7, tick]
      - beep f12000
      - tick
      -
      - [lead f90, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      - tick
      -
      - tick
      -
      -
      -
      -
      -
      -
      -
      - tick
      -
      -

part-d:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f70, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - tick
      -
      - [lead f105, tick]
      - [tick f18000, beep f11000]
      - tick
      - phoom f15000
      - tick f10000
      -
      - tick
      -
      - tick
      -
      -
      - tick
      -
      -
      -
      -
      - tick
      -
      -
      -
      -
      -
      -
      -
      -
      -

part-e:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f121.5, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - tick
      -
      - [lead f94, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      -
      -
      - tick
      -
      -
      -
      -
      -
      -
      -
      -
      - tick
      -

part-f:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f110, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - tick
      -
      - [lead f72, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      - tick
      -
      -
      -
      - tick
      -
      - tick
      -
      -
      -
      -
      -
      -
      -

part-g:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f95, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - tick
      -
      - [lead f60, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      - tick
      -
      -
      - tick
      -
      -
      - tick
      -
      - tick
      -
      -
      -
      -
      -

part-h:
  sequencer:
    interval: 0.1
    sequence:
      - [lead f90, tick]
      -
      - tick
      -
      - [phoom, tick]
      -
      - tick
      -
      - [lead f105, tick]
      - tick f18000
      - tick
      - phoom f15000
      - tick f10000
      - tick
      -
      -
      -
      - tick
      -
      - tick
      -
      -
      -
      -
      -
      -
      -
      - tick
      -
      -
      -
      -

sequence-sound-test:
  sequencer:
    interval: 0.3
    sequence:
      - [lead f200, tick]
      - lead f220
      - phoom f15000
      - tick f280
      -
      - [phoom f290, tick]
      - beep f13000
      -
      - ding
      - beep f279
      - [lead f278, tick]
      - lead f284
      - tick
      - phoom f15000
      - lead f285
      -
      - tick
      -
      -
      - tick

main-sequence:
  sequencer:
    chain:
      - part-a-inverted
      - part-a
      - part-b
      - part-c
      - part-d
      - part-e
      - part-f
      - part-g
      - part-h

# MIDI Example - Play sounds via MIDI input
midi-test:
  midi:
    channel: 0  # MIDI channel (0-15)
    signal:
      osc:
        type: SIN
        duration: 1.0
        amp: 0.5
        attack: 0.01
        release: 0.3

# MIDI with more complex sound
midi-synth:
  midi:
    channel: 0
    signal:
      osc:
        amp: 1
        duration: 1
        attack: 0.2
        release: 0.8
        partials:
          - osc:
              amp: 0.4
              duration: 0.01
              partials:
                - osc:
                    freq: 2
                    amp: 0.5
                    attack: 0.2
                - osc:
                    freq: 2.2
                    amp: 0.5
                    attack: 0.2
                - osc:
                    freq: 2.3
                    amp: 0.5
                    attack: 0.2
                - osc:
                    freq: 5
                    amp: 0.5
                    attack: 0.2
          - osc:
              freq: 1.5
              amp: 0.5
              attack: 0.2
          - osc:
              freq: 2
              amp: 0.5
              attack: 0.2

# MIDI with more complex sound
midi-env:
  retrigger:
    time: 0.1
    feedback: 0.5
    repeats: 4
    signal:
      midi:
        channel: 0
        signal:
          mix:
            signals:
              - envelope:
                  attack: 0.1
                  decay: 0.1
                  sustain: 0.3
                  release: 1
                  signal:
                    # shuffle:
                    #   seed: 7
                    #   chunks: 32
                    #   signal:
                        sample:
                          # base_freq: 2000
                          # duration: 4
                          base_freq: 200
                          # start: 0.354
                          start: 0
                          # end: 0.5
                          # speed: [0.1, 0.05]
                          # speed: 1
                          loop: true
                          # overlap: 0.5
                          file: samples/paulo.wav
              # - envelope:
              #     attack: 0.1
              #     decay: 0.5
              #     sustain: 0.2
              #     release: 1
              #     signal:
              #       osc:
              #         amp: 0.15
              #         partials:
              #           - osc:
              #               amp: 
              #                 osc:
              #                   freq: 5
              #                   amp: 0.3
              #               duration: 1
              #               release: 0.2
              #               partials:
              #                 - osc:
              #                     freq: 2
              #                     amp: 0.5
              #                 - osc:
              #                     freq: 2.2
              #                     amp: 0.5
              #                 - osc:
              #                     freq: 2.3
              #                     amp: 0.4
              #                 - osc:
              #                     freq: 5
              #                     amp: 0.1
              #           - osc:
              #               freq: 1.5
              #               amp: 0.5
              #           - osc:
              #               freq: 2
              #               amp: 0.2



# MIDI with more complex sound
midi-fm:
      midi:
        channel: 0
        signal:
          envelope:
            attack: 0.1
            decay: 0.5
            sustain: 0.8
            release: 1
            signal:
              osc:
                type: sin
                freq: [1, 2]
                  # normalise:
                  #   max: 10
                  #   signal:
                  #     sample:
                  #       # base_freq: 2000
                  #       # duration: 4
                  #       # base_freq: 200
                  #       # start: 0.354
                  #       start: 0.1
                  #       # end: 0.5
                  #       # speed: [0.1, 0.05]
                  #       # speed: 1
                  #       loop: true
                  #       # overlap: 0.5
                  #       file: samples/paulo.wav
                


# Test mix node
test-mix:
  mix:
    duration: 1
    signals:
      - osc:
          type: sin
          freq: 440
          amp: 0.5
      - osc:
          type: sin
          freq: 550
          amp: 0.5
      - osc:
          type: sin
          freq: 660
          amp: 0.5


# Test mix with different durations
test-mix-varied:
  mix:
    signals:
      - osc:
          type: sin
          freq: 220
          amp: 0.3
          duration: 0.5
      - osc:
          type: sin
          freq: 330
          amp: 0.3
          duration: 1.0
      - osc:
          type: sin
          freq: 440
          amp: 0.3
          duration: 1.5


midi-cc-filter:
  filter:
    type: lowpass
    cutoff:
      midi_cc:
        channel: 0
        cc: 17
        range: [0, 20000]
        initial: 1000
    peak:
      midi_cc:
        channel: 0
        cc: 18
        range: [0, 10]
        initial: 0
    signal:
      osc:
        type: saw
        freq: 
          midi_cc:
            channel: 0
            cc: 16
            range: [20, 2000]
            initial: 0
        amp: 0.3
        attack: 0.01
        release: 0.3


midi-cc-sample:
  sample:
    start:
      midi_cc:
        channel: 0
        cc: 16
        range: [0, 1]
        initial: 0
    end:
      midi_cc:
        channel: 0
        cc: 17
        range: [0, 1]
        initial: 1
    speed:
      midi_cc:
        channel: 0
        cc: 18
        range: [-10, 10]
        initial: 1
    loop: true
    # overlap: 0.5
    file: samples/waves.wav

fm:
  mix:
    signals:
      - osc:
          type: sin
          freq:
            midi_cc:
              channel: 0
              cc: 16
              range: [0, 500]
              initial: 250
          amp:
            midi_cc:
              channel: 0
              cc: 0
              initial: 0.5
          phase:
            osc:
              type: sin
              freq:
                midi_cc:
                  channel: 0
                  cc: 17
                  range: [0, 500]
                  initial: 250
              amp:
                midi_cc:
                  channel: 0
                  cc: 1
                  initial: 0.5
              phase:
                osc:
                  type: sin
                  freq:
                    midi_cc:
                      channel: 0
                      cc: 18
                      range: [0, 500]
                      initial: 250
                  amp:
                    midi_cc:
                      channel: 0
                      cc: 2
                      initial: 0.5
      - osc:
          type: sin
          freq:
            midi_cc:
              channel: 0
              cc: 19
              range: [0, 500]
              initial: 250
          amp:
            midi_cc:
              channel: 0
              cc: 3
              initial: 0.5
          phase:
            osc:
              type: sin
              freq:
                midi_cc:
                  channel: 0
                  cc: 20
                  range: [0, 500]
                  initial: 250
              amp:
                midi_cc:
                  channel: 0
                  cc: 4
                  initial: 0.5
              phase:
                osc:
                  type: sin
                  freq:
                    midi_cc:
                      channel: 0
                      cc: 21
                      range: [0, 500]
                      initial: 250
                  amp:
                    midi_cc:
                      channel: 0
                      cc: 5
                      initial: 0.5
      - osc:
          type: sin
          freq:
            midi_cc:
              channel: 0
              cc: 22
              range: [0, 500]
              initial: 250
          amp:
            midi_cc:
              channel: 0
              cc: 6
              initial: 0.5
          phase:
            sample:
              file: samples/feedback.wav
              speed: 
                midi_cc:
                  channel: 0
                  cc: 23
                  range: [0, 5.0]
                  initial: 1
              loop: true




sample-control:
  sample:
    file: samples/paulo.wav
    loop: true
    start: 0.5
    offset:
      midi_cc:
        channel: 0
        cc: 23
        range: [-1, 1]
        initial: 0
    speed:
      midi_cc:
        channel: 0
        cc: 7
        range: [-2, 2]
        initial: 0


sample-wavable-test:
  sample:
    file: samples/feedback.wav
    duration: 3
    start: [0.0, 0.5, 0.0]
    end: [0.5, 1.0, 0.5]
    speed: 1.0
    loop: false


sample-wavable-osc-test:
  sample:
    file: samples/feedback.wav
    duration: 5
    start:
      osc:
        type: sin
        freq: 0.5
        range: [0.0, 0.5]
    end:
      osc:
        type: sin
        freq: 0.5
        range: [0.5, 1.0]
    speed: 1.0
    loop: false


sample-wavable-loop-test:
  sample:
    file: samples/feedback.wav
    duration: 4
    start: [0.0, 0.3]
    end: [0.7, 1.0]
    speed: 1.0
    loop: true

test-sample-offset:
  sample:
    file: samples/feedback.wav
    duration: 5
    loop: true
    offset:
      osc:
        type: sin
        freq: 5
        range: [-200, 200]

test-sample-warble:
  sample:
    file: samples/chord.wav
    duration: 20
    loop: true
    offset:
      osc:
        type: sin
        freq: 1
        range: [-1000, 1000]
    speed: 1.0

test-sample-warble-with-speed:
  sample:
    file: samples/feedback.wav
    duration: 8
    loop: true
    offset:
      osc:
        type: sin
        freq: 4
        range: [-150, 150]
    speed:
      osc:
        type: sin
        freq: 0.5
        range: [0.8, 1.2]

flanger:
  delay:
    time:
      osc:
        type: sin
        freq: 0.5
        range: [0.001, 0.01]  # Varies from 1ms to 10ms
    signal:
      osc:
        type: sin
        freq: 440

# CC 21 wet amp
# CC 22 delay time
# CC 23 sample offset
# CC 4  dry to wet amp
# CC 5  dry amp
# CC 6  feedback amp
# CC 7  sample speed
echo:
  mix:
    signals:
      - map:
          from: [-1, 1]
          to: 
            - midi_cc:
                channel: 0
                cc: 5
                range: [0, -1]
                initial: -1
            - midi_cc:
                channel: 0
                cc: 5
                range: [0, 1]
                initial: 1
          signal:
            sample:
              id: paulo
              file: samples/waves.wav
              loop: true
              start: 0.5
              offset:
                midi_cc:
                  channel: 0
                  cc: 23
                  range: [-1, 1]
                  initial: 0
              speed:
                midi_cc:
                  channel: 0
                  cc: 7
                  range: [-2, 2]
                  initial: 1
      - map:
          from: [-1, 1]
          to: 
            - midi_cc:
                channel: 0
                cc: 21
                range: [0, -1]
                initial: 0
            - midi_cc:
                channel: 0
                cc: 21
                range: [0, 1]
                initial: 0
          signal:
            delay: 
              id: echo
              mode: tape
              time: 
                midi_cc:
                  channel: 0
                  cc: 22
                  range: [0, 5]
                  initial: 1
              signal:
                mix:
                  signals:
                    - map:
                        from: [-1, 1]
                        to: 
                          - midi_cc:
                              channel: 0
                              cc: 4
                              range: [0, -1]
                              initial: 0
                          - midi_cc:
                              channel: 0
                              cc: 4
                              range: [0, 1]
                              initial: 0
                        signal:
                          reference:
                            ref: paulo
                    - map:
                        from: [-1, 1]
                        to: 
                          - midi_cc:
                              channel: 0
                              cc: 6
                              range: [0, -1]
                              initial: 0
                          - midi_cc:
                              channel: 0
                              cc: 6
                              range: [0, 1]
                              initial: 0
                        signal:
                          reference:
                            ref: echo



echo2:
  mix:
    signals:
      - osc:
          id: paulo
          type: sin
          freq: 440
          duration: 0.1
      - map:
          from: [-1, 1]
          to: [-0.7, 0.7]
          signal:
            delay: 
              id: echo
              time: 0.2
              signal:
                mix:
                  signals:
                    - reference:
                        ref: paulo
                    - map:
                        from: [-1, 1]
                        to: [-0.7, 0.7]
                        signal:
                          reference:
                            ref: echo