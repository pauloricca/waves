kick-drum:
  tracks:
    click:
      osc:
        type: sqr
        freq: 200
        duration: 0.002
        amp: [0.3, 0]
    thump:
      osc:
        freq: [800, [100, 0.1], 100]
        duration: 0.05
        amp: [0.4, 0]
    body:
      osc:
        freq: [100, [50, 0.2], 50]
        duration: 0.2
        amp: [1, 0]


# Test dynamic range with LFO modulating oscillator range
test-dynamic-range:
  osc:
    type: sin
    freq: 440
    duration: 10
    range:
      - osc:
          type: sin
          freq: 50
          range: [-1, -0.1]
      - osc:
          type: sin
          freq: 300
          range: [1, 0.1]


kick-drum-dynamic:
  context:
    tune: 50
    signal:
      tracks:
        click:
          osc:
            type: sqr
            freq: tune * 4
            duration: 0.002
            amp: [0.3, 0]
        thump:
          osc:
            freq: [tune * 16, [tune * 2, 0.1]]
            duration: 0.05
            amp: [0.4, 0]
        body:
          osc:
            freq: [tune * 2, [50, 0.2]]
            duration: 0.2
            amp: [1, 0]



kick-test:
  tempo:
    bpm: 130
    signal:
      sequencer:
        interval: beat / 4
        repeat: 1000
        sequence:
          - kick-drum-dynamic
          - 
          - 
          -


oscar:
  retrigger:
    duration: 10
    time: 0.3
    repeats: 4
    signal:
      osc:
        type: tri
        amp: 0.5
        duration: 0.05
        attack: 0.1
        release: 0.1
        freq:
          hold:
            signal: rand([500, 250, 150, 700, 1300, 4000])

chop:
  context:
    c: rand(0, 14)
    signal:
      map:
        from: [-1, 1]
        to: [-6, 6]
        signal:
          sample:
            speed: 2
            file: output/chopped9
            chop: 
              hold:
                signal: c

glitch:
  context:
    c: rand(0, 164)
    signal:
      map:
        from: [-1, 1]
        to: [-1, 1]
        signal:
          sample:
            speed: 2
            file: output/hum_chopped
            chop: 
              hold:
                signal: c

hihat:
  context:
    duration: 1
    v: 1
    signal:
      expression:
        duration: 0.25
        exp: v * signal
        signal:
          # filter:
          #   cutoff: [20000, 200, 100]
          #   signal:
              osc:
                type: noise
                amp: [0.2, [0.07, 0.005], [0, 0.15]]
                attack: 0.001
                release: 1



kick:
  mix:
    duration: 1
    signals:
      # Rumble
      - osc:
          type: sin
          freq: [420, [55, 0.02], [45, 0.15]]
          amp: 0.6
          attack: 0.001
          release: 0.6
          duration: 0.75
      
      # Body
      - osc:
          type: sin
          freq: [150, [55, 0.015]]
          amp: 0.3
          attack: 0.0001
          release: 0.25
          duration: 0.2
          phase:
            osc:
              type: sin
              freq: [250, [85, 0.015]]
              amp: [0.8, [0.1, 0.03]]
              attack: 0.0005
              release: 0.15
              duration: 0.2
      
      # Upper harmonics
      - osc:
          type: tri
          freq: [180, [110, 0.01]]
          amp: 0.01
          attack: 0.001
          release: 0.15
          duration: 0.2
      
      # Punch
      - osc:
          type: noise
          amp: 0.02
          attack: 0.0001
          release: 0.008
          duration: 0.004
      
      # Extra punch
      - osc:
          type: sin
          freq: [3500, [800, 0.003]]
          amp: 0.1
          attack: 0.0001
          release: 0.006
          duration: 0.01
      
      # Sub harmonic
      - osc:
          type: sin
          freq: 40
          amp: 0.4
          attack: 0.002
          release: 0.5
          duration: 0.6

kick2:
  map:
    from: [-1, 1]
    to: [-1.5, 1.5]
    clip: [-1, 1]
    signal:
      mix:
        signals:
          - osc:
              attack: 0.01
              amp: 0.2
              release: 0.5
              duration: 0.3
              freq: [1000, [20, 0.04]]
          - osc:
              type: noise
              amp: 0.02
              attack: 0.0001
              release: 0.02
              duration: 0.01
          - osc:
              amp: 0.5
              attack: 0.2
              release: 0.5
              duration: 0.8
              freq: 50
              phase:
                osc:
                  amp: 0.5
                  attack: 0.1
                  release: 0.5
                  duration: 0.8
                  freq: 50
          - osc:
              type: tri
              amp: 0.02
              attack: 0.01
              release: 0.5
              duration: 0.3
              freq: 100
          - osc:
              type: tri
              amp: 0.005
              attack: 0.01
              release: 0.5
              duration: 0.3
              freq: 130
          - osc:
              type: sqr
              amp: 0.01
              attack: 0.01
              release: 0.5
              duration: 0.4
              freq: 18
