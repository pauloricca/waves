kick:
  context:
    tune: 50
    signal:
      mix:
  
        click:
          osc:
            type: sqr
            freq: tune * 4
            duration: 0.002
            attack: 0.0001
            amp: [0.3, 0]
  
        thump:
          osc:
            freq: [tune * 16, [tune * 2, 0.1]]
            duration: 0.1
            attack: 0.2
            amp: [0.8, 0]
            phase:
              osc:
                freq: tune
                range: [0, 1]
        body:
          osc:
            freq: [tune * 6, [tune, 0.12]]
            duration: 0.2
            attack: 0.2
            amp: [1, 0]
            phase:
              osc:
                freq: tune * 0.8
                range: [0, 1]



snare:
  mix:
    # Tonal component (shell resonance)
    tone:
      osc:
        type: tri
        freq: [260, [180, 0.05]]
        amp: 0.4
        attack: 0.001
        release: 0.15
        duration: 0.2
    # Noise component (snares)
    noise:
      filter:
        type: highpass
        cutoff: 2000
        signal:
          osc:
            type: noise
            amp: 0.3
            attack: 0.001
            release: 0.08
            duration: 0.15



kick_tom:
  context:
    tune: 50
    warp: 0 # 0: kick, 1: tom
    signal:
      mix:
  
        click:
          osc:
            type: sqr
            freq: tune * 4
            duration: 0.002
            attack: 0.0001
            amp: [0.3 * (1 - warp), 0]
  
        thump:
          osc:
            freq: [tune * 16 * (1 * 0.1 * warp), [tune * 2, 0.1 + 0.1 * warp]]
            duration: 0.1
            attack: 0.2
            amp: [0.8, 0]
            phase:
              osc:
                freq: tune
                range: [0, 1]
        body:
          osc:
            freq: [tune * (6 - 3 * warp), [tune * (1 + 0.5 * warp), 0.12 + 0.2 * warp]]
            duration: 0.4
            attack: 0.2 + 0.2 * warp
            amp: [1, [0, 0.5 + 0.5 * warp]]
            phase:
              osc:
                freq: tune * 0.8
                range: [0, 1 - 1 * warp]




tom_snare:
  context:
    tune: 50
    warp: 0 # 0: kick, 1: tom
    signal:
      mix:
  
        thump:
          osc:
            freq: [tune * 32, [tune * 3, 0.1]]
            duration: 0.1
            attack: 0.2
            amp: [0.8, 0]
            phase:
              osc:
                freq: tune
                range: [0, 1]

        tone:
          osc:
            type: tri
            freq: [260, [180, 0.05]]
            amp: [0.3 * warp, 0.3 * warp]
            attack: 0.001
            release: 0.15
            duration: 0.2

        noise:
          filter:
            type: highpass
            cutoff: 2000
            signal:
              osc:
                type: noise
                amp: [0.3 * warp, 0.3 * warp]
                attack: 0.001
                release: 0.08
                duration: 0.15





one_knob:
  sequencer:
    interval: 0.18
    steps:
      - kick_tom
      -
      - 
      -
      - kick_tom warp1
      -
      - 
      -
      # - tom_snare warp0
      # -
      # - 
      # -
      # - tom_snare warp1
      # -
      # -
      # -
      # - hihat
      # - hihat
      # - hihat
      # - hihat



yeum:
  context:
    tune: 50
    warp: 0 # 0: kick, 1: tom
    signal:
      mix:
  
        thump:
          osc:
            freq: [tune * 16 * (0.1 * warp), [tune * 2 * (1 + 0.5 * warp), 0.1 + 0.6 * warp]]
            duration: 0.1
            attack: 0.2
            amp: [0.8, 0]
            phase:
              osc:
                freq: tune
                range: [0, 1]
        body:
          osc:
            freq: [tune * (1 + 0.5 * warp), [tune * (6 - 5 * warp), 0.12 + 0.4 * warp]]
            duration: 0.4
            attack: 0.2 + 0.6 * warp
            amp: [1, [0, 0.5 + 0.5 * warp]]
            phase:
              osc:
                freq: tune * 0.8
                range: [0, 1 - 1 * warp]



success:
  retrigger:
    duration: 2.2
    repeat: 5
    time: 0.2
    signal:
      osc:
        type: tri
        duration: 1.8
        attack: 0.05
        release: 1
        freq:
          automation:
            interval: 0.2
            repeat: 1
            steps: [B3, D3, E3, G3]
          


kick-drum:
  mix:
    click:
      osc:
        type: sqr
        freq: 200
        duration: 0.002
        amp: [0.3, 0]
    thump:
      osc:
        freq: [800, [100, 0.1], 100]
        duration: 0.05
        amp: [0.4, 0]
    body:
      osc:
        freq: [100, [50, 0.2], 50]
        duration: 0.2
        amp: [1, 0]


# Test dynamic range with LFO modulating oscillator range
rumble:
  osc:
    type: sin
    freq: 50
    duration: 9999
    range:
      - osc:
          type: sin
          freq: 29
          range:
            - osc:
                type: sin
                freq: 3
                range: [-1, -.1]
            - osc:
                type: sin
                freq: 5
                range: [1, .1]
      - osc:
          type: sin
          freq: 47
          range:
            - osc:
                type: sin
                freq: 13
                range: [-1, -.1]
            - osc:
                type: sin
                freq: 7
                range: [1, .1]






kick-test:
  tempo:
    bpm: 130
    signal:
      sequencer:
        interval: beat / 4
        steps:
          - kick
          - 
          - 
          -


kick_test:
  tempo:
    bpm: 130
    signal:
      mix:
        kick:
          sequencer:
            id: kick
            interval: beat / 4
            steps:
              - kick
              - 
              - hihat v.1
              -
              - kick
              - 
              - glitch
              -
              - kick
              - 
              - hihat v.1
              -
              - kick
              - 
              - oscar
              -
            # steps:
            #   - kick, hihat v.1
            #   - 
            #   - hihat v.2
            #   - 
            # steps:
            #   - kick
            #   - 
            #   - hihat v.1
            #   - 
            steps:
              - kick
              - 
              -
              - 
        rumble:
          expression:
            exp: signal * amp
            signal:
              rumble: {}
            amp:
              follow:
                range: [.3, .05]
                release: beat / 16
                signal: $kick * 2





oscar:
  retrigger:
    duration: 10
    time: 0.3
    repeat: 4
    spread: 0.9
    movement: 4
    signal:
      osc:
        type: tri
        amp: 0.5
        duration: 0.05
        attack: 0.1
        release: 0.1
        freq:
          hold:
            signal: rand([500, 250, 150, 700, 1300, 4000])

chop:
  context:
    c: rand(0, 14)
    signal:
      map:
        from: [-1, 1]
        to: [-6, 6]
        signal:
          sample:
            speed: 2
            file: output/chopped9
            chop: 
              hold:
                signal: c

glitch:
  context:
    c: rand(0, 164)
    signal:
      map:
        from: [-1, 1]
        to: [-1, 1]
        signal:
          sample:
            speed: 2
            file: output/hum_chopped
            chop: 
              hold:
                signal: c

hihat:
  context:
    duration: 1
    v: 1
    signal:
      expression:
        duration: 0.25
        exp: v * signal
        signal:
          # filter:
          #   cutoff: [20000, 200, 100]
          #   signal:
              osc:
                type: noise
                amp: [0.2, [0.07, 0.005], [0, 0.15]]
                attack: 0.001
                release: 1



kick_ai:
  mix:
    duration: 1

    rumble:
      osc:
        type: sin
        freq: [420, [55, 0.02], [45, 0.15]]
        amp: 0.6
        attack: 0.001
        release: 0.6
        duration: 0.75
  
    body:
      osc:
        type: sin
        freq: [150, [55, 0.015]]
        amp: 0.3
        attack: 0.0001
        release: 0.25
        duration: 0.2
        phase:
          osc:
            type: sin
            freq: [250, [85, 0.015]]
            amp: [0.8, [0.1, 0.03]]
            attack: 0.0005
            release: 0.15
            duration: 0.2
    
    upper_harmonics:
      osc:
        type: tri
        freq: [180, [110, 0.01]]
        amp: 0.01
        attack: 0.001
        release: 0.15
        duration: 0.2
  
    punch:
      osc:
        type: noise
        amp: 0.02
        attack: 0.0001
        release: 0.008
        duration: 0.004
      
    extra_punch:
      osc:
        type: sin
        freq: [3500, [800, 0.003]]
        amp: 0.1
        attack: 0.0001
        release: 0.006
        duration: 0.01
      
    sub_harmonic:
      osc:
        type: sin
        freq: 40
        amp: 0.4
        attack: 0.002
        release: 0.5
        duration: 0.6

kick2:
  map:
    from: [-1, 1]
    to: [-1.5, 1.5]
    clip: [-1, 1]
    signal:
      mix:
        signals:
          - osc:
              attack: 0.01
              amp: 0.2
              release: 0.5
              duration: 0.3
              freq: [1000, [20, 0.04]]
          - osc:
              type: noise
              amp: 0.02
              attack: 0.0001
              release: 0.02
              duration: 0.01
          - osc:
              amp: 0.5
              attack: 0.2
              release: 0.5
              duration: 0.8
              freq: 50
              phase:
                osc:
                  amp: 0.5
                  attack: 0.1
                  release: 0.5
                  duration: 0.8
                  freq: 50
          - osc:
              type: tri
              amp: 0.02
              attack: 0.01
              release: 0.5
              duration: 0.3
              freq: 100
          - osc:
              type: tri
              amp: 0.005
              attack: 0.01
              release: 0.5
              duration: 0.3
              freq: 130
          - osc:
              type: sqr
              amp: 0.01
              attack: 0.01
              release: 0.5
              duration: 0.4
              freq: 18


clap:
  mix:
    # Initial burst
    first:
      filter:
        type: bandpass
        cutoff: 1500
        peak: 2
        signal:
          osc:
            type: noise
            amp: 0.5
            attack: 0.0001
            release: 0.015
            duration: 0.02
    # Second burst (slight delay)
    second:
      delay:
        time: 0.015
        signal:
          filter:
            type: bandpass
            cutoff: 1800
            peak: 2
            signal:
              osc:
                type: noise
                amp: 0.4
                attack: 0.0001
                release: 0.012
                duration: 0.018
    # Third burst
    third:
      delay:
        time: 0.028
        signal:
          filter:
            type: bandpass
            cutoff: 2000
            peak: 2.5
            signal:
              osc:
                type: noise
                amp: 0.45
                attack: 0.0001
                release: 0.018
                duration: 0.025
    # Tail/reverb component
    tail:
      delay:
        time: 0.045
        signal:
          filter:
            type: highpass
            cutoff: 3000
            signal:
              osc:
                type: noise
                amp: 0.15
                attack: 0.001
                release: 0.08
                duration: 0.1
      
